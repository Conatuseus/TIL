> [ì´ì „ ê¸€](https://velog.io/@conatuseus/RequestBody%EC%97%90-%EA%B8%B0%EB%B3%B8-%EC%83%9D%EC%84%B1%EC%9E%90%EB%8A%94-%EC%99%9C-%ED%95%84%EC%9A%94%ED%95%9C%EA%B0%80)ì—ì„œëŠ” ì–´ë–»ê²Œ `@RequestBody`ë¥¼ ì²˜ë¦¬í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ë³´ê¸° ìœ„í•œ **ê³¼ì •**ì„ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” `@RequestBody`ë¥¼ ë°”ì¸ë”©í•˜ëŠ” ObjectMapperì— ëŒ€í•´ ì•Œì•„ë³´ê³ , ê²°ë¡ ì„ ì§“ê² ìŠµë‹ˆë‹¤.
> ì°¸ê³ ë¡œ ì•„ë˜ ì‚¬ì§„ë“¤ì—ì„œ í˜„ì¬ ìœ„ì¹˜(class)ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì°¾ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤. ì²«ë²ˆì§¸ ì‚¬ì§„ì„ ì˜ˆë¡œ ë“¤ì–´, `AbstractJackson2HttpMessageConverter > readJavaType()` ì—ì„œ AbstractJackson2HttpMessageConverê°€ í˜„ì¬ í´ë˜ìŠ¤ ì´ë¦„ì´ë©°, readJavaType()ì€ ë©”ì„œë“œëª…ì…ë‹ˆë‹¤.

# ObjectMapperë€?
**Jacksonì˜ Documentì—ì„œ ObjectMapper**ë¥¼ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.


> _"ObjectMapperëŠ” ê¸°ë³¸ POJO(Plain Old Java Objects) ë˜ëŠ” ë²”ìš© JSON Tree Model(JsonNode)ì—ì„œ JSONì„ ì½ê³  ì“°ëŠ” ê¸°ëŠ¥ê³¼ ë³€í™˜ ìˆ˜í–‰ì„ ìœ„í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
> ë˜í•œ ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼ì˜ JSON ì»¨í…ì¸ ì™€ í•¨ê»˜ ì‘ë™í•˜ê³  ë‹¤í˜•ì„± ë° ê°ì²´ ë™ì¼ì„±ê³¼ ê°™ì€ ê³ ê¸‰ ê°ì²´ ê°œë…ì„ ì§€ì›í•˜ë„ë¡ Customizingí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."_

ì‰½ê²Œ ë§í•´, **Jacksonì˜ ObjectMapperëŠ” Java Object â†â†’ JSON íŒŒì‹±ì„ ì‰½ê²Œ í•´ì£¼ëŠ” í´ë˜ìŠ¤** ì…ë‹ˆë‹¤.
ObjectMapper í´ë˜ìŠ¤ë¥¼ ì‚´í´ë³´ë©´, `serialize`ì™€ `deserialize`ë¼ëŠ” ë‹¨ì–´ê°€ í¬í•¨ëœ ë©”ì„œë“œê°€ ë§ì´ ìˆìŠµë‹ˆë‹¤. 
Jsonì„ Java ì˜¤ë¸Œì íŠ¸ë¡œ íŒŒì‹±í•˜ëŠ” ê²ƒì„ **ì§ë ¬í™”(serialize)**ë¼ê³  í•˜ë©°, ë°˜ëŒ€ëŠ” **ì—­ì§ë ¬í™”(deserialize)**ë¼ê³  í•©ë‹ˆë‹¤.

# ObjectMapperê°€ `@RequestBody`ë¥¼ bindingí•˜ëŠ” ê³¼ì • ì‚´í´ë³´ê¸°


ì§€ë‚œ ê¸€ì—ì„œ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ AbstractJackson2HttpMessageConverterê°€ `objectMapper`ì˜ `readValue()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤ëŠ” ê²ƒê¹Œì§€ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

![image.png](https://images.velog.io/post-images/conatuseus/d426c4b0-3ed8-11ea-8609-9b6fc89aa201/image.png)

---
ì´ì œ `objectMapper.readValue()` ë©”ì„œë“œ ë‚´ë¶€ë¥¼ í•œë²ˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.
![image.png](https://images.velog.io/post-images/conatuseus/98c73550-3ee0-11ea-a6b8-eb179f450c1c/image.png)

objectMapperì˜ `readValue()`ë‚´ì—ì„œëŠ” **Requestì˜ Bodyê°€ nullì¸ì§€ë§Œ í™•ì¸**í•˜ê³ , ìœ„ ì‚¬ì§„ê³¼ ê°™ì´ **`_readMapAndClose()` ë©”ì„œë“œë¥¼ í˜¸ì¶œ**í•©ë‹ˆë‹¤.
ì´ `_readMapAndClose()` ë©”ì„œë“œëŠ” ì—¬ëŸ¬ê°€ì§€ ì‘ì—…ë“¤ì„ í•˜ëŠ”ë°, **í•µì‹¬ì€ JsonDeserializerë¥¼ ì°¾ê³  í•´ë‹¹ JsonDeserializerë¡œ deserialize(ì—­ì§ë ¬í™”)ë¥¼ í•´ì„œ Objectë¥¼ ë°˜í™˜í•´ì¤€ë‹¤ëŠ” ê²ƒ**ì…ë‹ˆë‹¤.
ìœ„ ì½”ë“œì—ì„œëŠ” `deser`ê°€ ì°¾ì€ deserializerì´ê³ , í•´ë‹¹ deserializerë¡œ ì—­ì§ë ¬í™”í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ë¹¨ê°„ìƒ‰ ë¶€ë¶„ì…ë‹ˆë‹¤. `PostsSaveRequestDto`ëŠ” Beanì´ë¯€ë¡œ ì°¾ì•„ì§„ deserializerëŠ” BeanDeserializerë¡œ ë³´ì—¬ì§‘ë‹ˆë‹¤.

---
ì´ì œ deser.deserialize() ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ë´…ì‹œë‹¤.

![image.png](https://images.velog.io/post-images/conatuseus/677e9d60-3ee7-11ea-8557-e73ccea7dc99/image.png)

ë¨¼ì € `p.isExpectedStartObjectToken()` ë©”ì„œë“œëŠ” Jsonì´ "{"ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  `_vanillaProcessing`ê°€ ë§ëŠ”ì§€ í™•ì¸í•˜ëŠ”ë°, `_vanillaProcessing`ì˜ ì£¼ì„ì„ ë³´ë‹ˆ 
"*íŠ¹ìˆ˜ ê¸°ëŠ¥ì´ ì „í˜€ ì—†ìŒì„ ë‚˜íƒ€ë‚´ëŠ” í”Œë˜ê·¸ë¡œ ê°€ì¥ ê°„ë‹¨í•œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.*" ë¼ê³  ì í˜€ìˆìŠµë‹ˆë‹¤.
ë‹¤ìŒì—ëŠ” `_objectIdReader`ê°€ nullì´ ì•„ë‹Œì§€ í™•ì¸í•˜ëŠ”ë°, `_objectIdReader`ëŠ” deserializerê°€ ì²˜ë¦¬í•˜ëŠ” ê°’ì— Object Idë¥¼ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤. í˜„ì¬ëŠ” Object Idë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ `if(_objectIdReader !=null)` ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ì§€ ì•ŠìŠµë‹ˆë‹¤.

---
`deserializeFromObject()` ë©”ì„œë“œ ë‚´ë¶€ë¥¼ ë“¤ì–´ê°€ë´…ì‹œë‹¤.

![image.png](https://images.velog.io/post-images/conatuseus/58bec1e0-3ee9-11ea-a9b9-25498ef943d9/image.png)

**ìœ„ ê·¸ë¦¼ì˜ ì½”ë“œ ìœ„ì—ëŠ” ì¡°ê±´ë¬¸ê³¼ ì²˜ë¦¬ê³¼ì •**ì´ ìˆì§€ë§Œ, ì¡°ê±´ë¬¸ ë‚´ë¶€ë¥¼ ë“¤ì–´ê°€ì§€ ì•Šìœ¼ë¯€ë¡œ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.
ì´ì œ ëŒ€ë§ì˜ **í•µì‹¬ë¶€ë¶„**ì…ë‹ˆë‹¤. ë°”ë¡œ Objectë¥¼ ìƒì„±í•˜ê³ , í•„ë“œë¥¼ ë„£ì–´ì£¼ëŠ” ë¶€ë¶„ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ê¸°ì„œë„ ëª¨ë‘ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê¸° ë•Œë¬¸ì— ë´ì•¼í•  ê²ƒë“¤ì´ ë§ì´ ë‚¨ì•˜ìŠµë‹ˆë‹¤...ğŸ˜‚

---
ë¨¼ì € Objectë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œì¸ `createUsingDefault()`ë¥¼ ì‚´í´ë´…ì‹œë‹¤. ë©”ì„œë“œëª…ë§Œ ë´ë„ default ìƒì„±ìë¡œ ìƒì„±í•˜ê² ë‹¤ëŠ” ëŠë‚Œì´ í™• ì˜µë‹ˆë‹¤.

![image.png](https://images.velog.io/post-images/conatuseus/4e32c180-3eea-11ea-95e4-0f27f07d39d7/image.png)

ë¨¼ì € `_defaultCreator` ê°€ nullì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ defaultCreatorë€ ê¸°ë³¸ ìƒì„±ìë¥¼ ë§í•©ë‹ˆë‹¤(default constructor, @NoArgsConstructor)

### ê¸°ë³¸ìƒì„±ìê°€ Nullì´ë©´, ì¦‰ ê¸°ë³¸ ìƒì„±ìê°€ ì—†ìœ¼ë©´ ì™œ ì•ˆë˜ëŠ”ì§€ ì—¬ê¸°ì„œ íŒŒì•…í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.
ë§Œì•½ defaultìƒì„±ìê°€ ì—†ì—ˆë‹¤ë©´, `_defaultCreator == null`ì„ ë§Œì¡±í–ˆì„ ê²ƒì´ê³  `super.createUsingDefault()` ë©”ì„œë“œê°€ í˜¸ì¶œë  ê²ƒì…ë‹ˆë‹¤.
í˜„ì¬ëŠ” `@NoArgsConstructor` ì–´ë…¸í…Œì´ì…˜ì„ DTOì— ì‘ì„±í–ˆê¸° ë•Œë¬¸ì— ìœ„ì˜ ì¡°ê±´ì— ë§Œì¡±í•˜ì§€ ì•Šì•˜ì„ ê²ƒì…ë‹ˆë‹¤. 


_defaultCreator.call() ë‚´ë¶€ë¥¼ ì•Œì•„ë³´ê¸° ì „ì—, `@NoArgsConstructor`ë¥¼ ì§€ìš´ í›„ì— super.createUsingDefault() ë©”ì„œë“œê°€ í˜¸ì¶œë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

---
### í•˜ì§€ë§Œ createUsingDefault() ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê¸° ì „ì— ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.
ë‹¹ì—°íˆ `createUsingDefault()` ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•  ê²ƒì´ë¼ê³  ìƒê°í–ˆë‹¤. ì™œëƒí•˜ë©´ í•´ë‹¹ ë©”ì„œë“œ ë‚´ì— defaultCreatorê°€ nullì¸ì§€ í™•ì¸í•˜ëŠ” ë¶€ë¶„ì´ ì¡´ì¬í–ˆê¸° ë•Œë¬¸ì´ë‹¤.

`@NoArgsConstructor` ì–´ë…¸í…Œì´ì…˜ì„ ì§€ìš°ê³ , if(_defaultCreator == null)ì— breakpointë¥¼ ì°ê³  ë””ë²„ê¹…ì„ ëŒë ¸ëŠ”ë°... **í•´ë‹¹ breakPointì—ì„œ ë””ë²„ê¹…ì´ ê±¸ë¦¬ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤**...ğŸ˜¡
ì´ì „ì— **ì¡°ê±´ë¬¸ì— ê±¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤ê³  ìƒëµí–ˆë˜ ê³³**ì—ì„œ ê±¸ë¦° ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” deserializeFromObject() ë©”ì„œë“œì˜ ìƒëµëœ ìœ—ë¶€ë¶„ ì½”ë“œì…ë‹ˆë‹¤.

![image.png](https://images.velog.io/post-images/conatuseus/23ab34b0-3eef-11ea-a9b9-25498ef943d9/image.png)

`@NoArgsConstructor`ì„ ì‚­ì œí•˜ê³  ë””ë²„ê¹… í•œ ê²°ê³¼ ìœ„ ì‚¬ì§„ì˜ ë¹¨ê°„ìƒ‰ ë¶€ë¶„ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
defaultìƒì„±ìê°€ ì—†ìœ¼ë¯€ë¡œ _nonStandardCreation ì¡°ê±´ì„ ë§Œì¡±í•©ë‹ˆë‹¤. ë”°ë¼ì„œ `deserializeFromObjectUsingNonDefault` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ Objectë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ë©”ì„œë“œëª…ë§Œ ë´ë„ defaultìƒì„±ìë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  Objectë¡œ deserializeí•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](https://images.velog.io/images/conatuseus/post/171eff75-ea77-4101-bb3a-dfb777ec4399/image.png)

ê·¸ ë©”ì„œë“œì˜ ë‚´ë¶€ë¥¼ ë³´ë©´ **delegateSerializerë¥¼ ì‚¬ìš©í•˜ë„ë¡** ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ì˜ DTOëŠ” delegateë¥¼ í•˜ì§€ ì•Šì•„ì„œ delegateSerializerë¥¼ ëª» ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²ƒì…ë‹ˆë‹¤.(propertyë„ ì„¤ì •í•´ì¤€ ê²ƒì´ ì•„ë‹ˆë¼ì„œ)

### ê²°êµ­ default ìƒì„±ìê°€ ì—†ì–´ì„œ ì˜¤ë¥˜ê°€ ìƒê¸°ëŠ” ê²ƒì€ ë§ë‹¤.
í•˜ì§€ë§Œ, default ìƒì„±ìê°€ ì—†ë”ë¼ë„ property ê¸°ë°˜ í´ë˜ìŠ¤(property ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ)ë©´ í•„ìš” ì—†ì„ ê²ƒì…ë‹ˆë‹¤. ë˜ëŠ” delegateë¥¼ í•œë‹¤ë©´.

---

ë‹¤ì‹œ ëŒì•„ì™€ì„œ, `_defaultCreator.call()`ë¥¼ ë“¤ì–´ê°€ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](https://images.velog.io/images/conatuseus/post/a9d53705-bd65-407b-a5d2-a4f6cde5001a/image.png)

![image.png](https://images.velog.io/post-images/conatuseus/a2f05dc0-3ef6-11ea-b2aa-9ff9b912552a/image.png)



## ê²°ë¡ 
ì´ë²ˆ ê¸€ì—ì„œëŠ” `@RequestBody`ì— ì™œ ê¸°ë³¸ ìƒì„±ì(`@NoArgsConstructor`)ê°€ í•„ìš”ì—†ëŠ”ì§€ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤. 
ì œê°€ ì´ë²ˆ ê¸€ì„ ì‘ì„±í•˜ë©´ì„œ ë‚´ë¦° ê²°ë¡ ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
**1. ì¼ë°˜ì ì¸ ìƒí™©ì—ì„œëŠ” ê¸°ë³¸ ìƒì„±ìê°€ ê¼­ í•„ìš”í•˜ë‹¤.**
**2. ì™œëƒí•˜ë©´, RestControllerì—ì„œ @RequestBodyë¥¼ ë°”ì¸ë”©ì„ í•˜ê¸° ìœ„í•´ ObjectMapperë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ê¸°ë³¸ ìƒì„±ìë¡œ DTOë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì´ë‹¤.**
**3. í•˜ì§€ë§Œ `@JsonProperty`, `@JsonAutoDetect` ë“±ì„ ì‚¬ìš©í•œ Property ê¸°ë°˜ í´ë˜ìŠ¤ì´ê±°ë‚˜, ìƒì„±ìê°€ ìœ„ì„ëœ ê²½ìš°ë¼ë©´ í•„ìš”í•˜ì§€ ì•Šë‹¤.**

**Objectë¥¼ ìƒì„±í•˜ëŠ” ê²ƒê¹Œì§€ í™•ì¸í–ˆìœ¼ë‹ˆ ì´ì œ ì£¼ì…í•˜ëŠ” ê³¼ì •ì„ ë³´ë©´
"`@Setter`ëŠ” ì™œ í•„ìš” ì—†ëŠ”ì§€" ì— ëŒ€í•´ ì•Œ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œëŠ” í•´ë‹¹ ë‚´ìš©ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.**


> ì´ë²ˆ ê¸€ì„ ì‘ì„±í•˜ë©´ì„œ ì½”ë“œë¥¼ ì´í•´í•˜ëŠ”ë° ì‹œê°„ì´ ë§ì´ ê±¸ë ¸ê³ , ì½”ë“œë¥¼ íŒŒë©´ íŒ”ìˆ˜ë¡ ëª¨ë¥´ëŠ” ê²ƒë“¤ì´ ë§ì´ ë‚˜ì™€ì„œ í˜ë“¤ì—ˆì§€ë§Œ ì¬ë°Œê³  ìœ ìµí–ˆìŠµë‹ˆë‹¤.
> ì˜ëª»ëœ ì •ë³´ê°€ ìˆë‹¤ê±°ë‚˜, ì´í•´ê°€ ì•ˆë˜ëŠ” ë¶€ë¶„ì´ ìˆë‹¤ë©´ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.
> ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

- ì°¸ê³ : https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html